---
import ComplexComponent from '../../components/withAstro/ComplexComponent.astro';
import { createFixture, type FixtureType } from '../../data/fixtureType';
import Shell from '../../layout/Shell.astro';
import Cacher from '../../utils/CacherComponent.astro';
import cache from '../../utils/cache';

export const prerender = false;

let sampleFixture = await cache?.get<FixtureType>("only-astro");

if (!sampleFixture) {
  sampleFixture = createFixture({ sizeInKB: 200 });
  await cache?.set("only-astro", sampleFixture, "10s");
}
---

<Shell title="Astro Complex Component Demo">
  <Cacher key="only-astro" props={{sampleFixture}} ttl="100ms">
    <ComplexComponent fixture={sampleFixture} />
  </Cacher>
</Shell>