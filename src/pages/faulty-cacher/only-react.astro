---
import { ComplexComponent } from '../../components/withReact/ComplexComponent';
import { createFixture, type FixtureType } from '../../data/fixtureType';
import Shell from '../../layout/Shell.astro';
import Cacher from '../../utils/FaultyCacherComponent.astro';
import faultyCache from '../../utils/faulty-cache';

export const prerender = false;

let sampleFixture = await faultyCache?.get<FixtureType>("only-astro");

if (!sampleFixture) {
  sampleFixture = createFixture({ sizeInKB: 200 });
  await faultyCache?.set("only-astro", sampleFixture, "10s");
}
---

<Shell title="React Complex Component Demo">
  <Cacher key="only-react" props={{sampleFixture}} ttl="100ms">
    <ComplexComponent fixture={sampleFixture} client:load />
  </Cacher>
</Shell>